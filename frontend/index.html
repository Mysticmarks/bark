<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bark Multidimensional Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="app">
      <header class="topbar" aria-label="Application header">
        <div class="logo" aria-label="Bark Studio logo">Bark Studio</div>
        <div class="status" id="connectionStatus" role="status" aria-live="polite">Offline</div>
        <div class="theme-switch">
          <label class="switch" aria-label="Toggle theme">
            <input type="checkbox" id="toggleTheme" />
            <span class="slider"></span>
            <span class="switch-label">Light mode</span>
          </label>
        </div>
      </header>

      <main class="layout">
        <section class="panel scene-panel" aria-label="Three.js scene">
          <canvas id="scene" aria-hidden="true"></canvas>
          <div class="scene-overlay">
            <div>
              <h1>Multimodal Playground</h1>
              <p>
                Text, audio, imagery, volumetrics, and temporal video unified in a single dashboard.
                Rendered with PBR materials and orbit controls.
              </p>
            </div>
            <div class="quick-stats" id="sceneStats" aria-live="polite"></div>
          </div>
        </section>

        <section class="panel control-grid" aria-label="Inputs">
          <div class="control-card" aria-labelledby="textCardTitle">
            <div class="control-card__header">
              <h2 id="textCardTitle">Text → Audio/Video</h2>
              <span class="pill">1D</span>
            </div>
            <label class="field" for="textPrompt">
              <span>Prompt</span>
              <textarea
                id="textPrompt"
                placeholder="Describe the sonic or visual scene you want Bark to build..."
                rows="4"
                aria-required="true"
              ></textarea>
            </label>
            <div class="inline-grid">
              <label class="field" for="videoResolution">
                <span>Video preset</span>
                <select id="videoResolution">
                  <option value="3840x2160">4K UHD (3840×2160)</option>
                  <option value="2560x1440">QHD (2560×1440)</option>
                  <option value="1920x1080">FHD (1920×1080)</option>
                </select>
              </label>
              <label class="field" for="videoFps">
                <span>Frame rate</span>
                <select id="videoFps">
                  <option value="30">30 FPS (cinematic realtime)</option>
                  <option value="24">24 FPS</option>
                  <option value="60">60 FPS</option>
                </select>
              </label>
            </div>
            <div class="inline-grid">
              <label class="field" for="textTemp">
                <span>Text temperature</span>
                <input id="textTemp" type="number" min="0" max="1.5" step="0.05" value="0.7" />
              </label>
              <label class="field" for="waveformTemp">
                <span>Waveform temperature</span>
                <input id="waveformTemp" type="number" min="0" max="1.5" step="0.05" value="0.7" />
              </label>
            </div>
            <label class="field" for="captionText">
              <span>Caption text (defaults to prompt)</span>
              <input id="captionText" type="text" placeholder="Optional closed captions" />
            </label>
            <div class="toggle-row">
              <label class="switch">
                <input type="checkbox" id="enableCaptions" checked />
                <span class="slider"></span>
                <span class="switch-label">Closed captions default ON</span>
              </label>
              <label class="switch">
                <input type="checkbox" id="enableRealtime" checked />
                <span class="slider"></span>
                <span class="switch-label">Realtime layered diffusion</span>
              </label>
              <label class="switch">
                <input type="checkbox" id="enableHdAudio" checked />
                <span class="slider"></span>
                <span class="switch-label">HD audio (320kbps AAC)</span>
              </label>
            </div>
            <button id="sendPrompt">Synthesize</button>
            <div id="formErrors" role="alert" aria-live="assertive"></div>
          </div>

          <div class="control-card" aria-labelledby="backendCardTitle">
            <div class="control-card__header">
              <h2 id="backendCardTitle">Backend Orchestration</h2>
              <span class="pill">API</span>
            </div>
            <div class="hint">Checks health, toggles dry-run mode, and sets output targets.</div>
            <div class="inline-grid">
              <label class="field" for="outputDir">
                <span>Output directory</span>
                <input id="outputDir" type="text" placeholder="outputs/" />
              </label>
              <label class="field" for="jobPrefix">
                <span>Optional job prefix</span>
                <input id="jobPrefix" type="text" placeholder="job-id (auto if blank)" />
              </label>
            </div>
            <label class="switch">
              <input type="checkbox" id="dryRun" checked />
              <span class="slider"></span>
              <span class="switch-label">Plan only (no heavy generation)</span>
            </label>
            <label class="switch">
              <input type="checkbox" id="renderVideoToggle" />
              <span class="slider"></span>
              <span class="switch-label">Render UHD MP4 + captions</span>
            </label>
            <div class="capability-block" id="capabilityList" aria-live="polite"></div>
          </div>

          <div class="control-card" aria-labelledby="audioCardTitle">
            <div class="control-card__header">
              <h2 id="audioCardTitle">Audio &amp; Spectral</h2>
              <span class="pill">1D/2D</span>
            </div>
            <input type="file" id="audioUpload" accept="audio/*" aria-label="Upload audio" />
            <div class="hint">Uploads will be converted to Bark-compatible features.</div>
            <button id="previewAudio">Preview Upload</button>
          </div>

          <div class="control-card" aria-labelledby="imageCardTitle">
            <div class="control-card__header">
              <h2 id="imageCardTitle">Images &amp; Volumes</h2>
              <span class="pill">2D/3D</span>
            </div>
            <input type="file" id="imageUpload" accept="image/*" multiple aria-label="Upload images" />
            <label class="switch">
              <input type="checkbox" id="enableVolume" />
              <span class="slider"></span>
              <span class="switch-label">Volume stack</span>
            </label>
            <button id="loadImages">Load Layers</button>
          </div>

          <div class="control-card" aria-labelledby="rtcCardTitle">
            <div class="control-card__header">
              <h2 id="rtcCardTitle">Temporal &amp; 4D</h2>
              <span class="pill">4D</span>
            </div>
            <video id="videoPreview" autoplay playsinline muted aria-label="WebRTC preview"></video>
            <div class="button-row">
              <button id="connectRtc">Connect WebRTC</button>
              <button id="captureFrame">Capture Frame</button>
            </div>
          </div>
        </section>

        <section class="panel" aria-label="Activity">
          <div class="panel__header">
            <h2>Activity Stream</h2>
            <div class="mini-controls">
              <button id="clearLog">Clear</button>
              <button id="saveSession">Save Session</button>
            </div>
          </div>
          <div class="response-block" id="responseSummary" aria-live="polite">
            <div class="response-block__title">Backend response</div>
            <div class="response-block__body" id="responseBody">Waiting for synthesis...</div>
          </div>
          <div class="jobs" id="jobList" aria-live="polite"></div>
          <div id="log" class="log" aria-live="polite"></div>
          <div class="player" aria-label="Audio player">
            <div class="player__info">
              <div>Audio preview</div>
              <div id="audioMeta" class="hint">Load a job to stream audio.</div>
            </div>
            <audio id="audioPlayer" controls preload="none"></audio>
          </div>
        </section>
      </main>
    </div>

    <div id="toastRoot" role="status" aria-live="polite"></div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
